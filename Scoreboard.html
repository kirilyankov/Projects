<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Score Board</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">

  <link rel="stylesheet" href="css/styles.css?v=1.0">
  <script type="text/javascript">
  
  var ScoreBoard = (function () {
  
  var participants = {},
    beerCount = 0;

  /**
   * Holds participant data
   * @param {String} name
   */
  function Participant (name) {
    this.name = name;
    this.scores = 0;
    this.beers = 0;
  }

  /**
   * Adds pariticipant to the scoreboard
   * @param {String} name
   */
  function addParticipant (name) {
    participants[name] = new Participant(name);

  }

  /**
   * Increment participant points
   * @param  {String} participantName
   * @param  {Number} points
   * @return {Void}
   */
  function givePoints (participantName, points) {
    participants[participantName].scores += points;
    var beersToAdd;

    if(participants[participantName].scores >= 100) {

      beersToAdd = parseInt(participants[participantName].scores / 100, 10);

      participants[participantName].scores = participants[participantName].scores - (beersToAdd * 100);
      
      participants[participantName].beers += beersToAdd;
      
      beerCount += beersToAdd;
      console.log(beersToAdd + ' Beers goes to ' + participantName);
    }
  }

  function listScore () {
    //Name -> Beers
    for(var name in participants){
      console.log(participants[name].name + ' Points: ' + participants[name].scores + ' Beers: ' + participants[name].beers);
    }
  }

  var publicApi = {
    addParticipant: addParticipant,
    givePoints: givePoints,
    listScore: listScore,
    beersGiven: function () {

      return beerCount;
    }
  };

  return publicApi;
})();

  </script>
</head>

<body>
<p>Beer Contest - Scoreboard</p>
<form>
<input type = "text" id = "participantName" placeholder = "New Participant Name Here">
<input type = "submit" id = "addParticipantButton" value = "Add">
</form>
<table id = "mainTable">
  <thead id = "tableHead">
    <tr id = "row1">
      <th id = "col1">Participant Name</th>
      <th id = "col2">Points Awarded</th>
      <th id = "col3">Beers won</th>
      <th id = "col4">Add Points</th>
      <th id = "col5">Remove</th>
    </tr>
  </thead>
  <tbody id = "tableBody">
    <tr id = "row2">
      <td id = "col1">Ivan</td>
      <td id = "col2">32</td>
      <td id = "col3">1</td>
      <td id = "col4"><input type = "text" id = "points"/><input type = "submit" id = "Add" value = "Add"/></td>
      <td id = "col5"><input type = "submit" id = "delete" value = "X"/></td>
    </tr>
  </tbody>
</table>
</body>
</html>